{"filter":false,"title":"messages_controller.rb","tooltip":"/bookers2-debug/bookers2-debug/app/controllers/messages_controller.rb","ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":10,"column":85},"end":{"row":10,"column":85},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"b72387dffdedb4d62edd4df254e78cd90edfb654","mime":"text/x-script.ruby","undoManager":{"mark":12,"position":12,"stack":[[{"start":{"row":0,"column":48},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":1,"column":0},"end":{"row":1,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":1,"column":2},"end":{"row":16,"column":7},"action":"insert","lines":["  def create","    if Entry.where(user_id: current_user.id, room_id: params[:message][:room_id]).present?","      @message = Message.new(message_params)","      @message.user_id = current_user.id","      @message.save","    else","      flash[:alert] = \"メッセージ送信に失敗しました。\"","    end","    render :validater unless @message.save","  end","","  private","","    def message_params","      params.require(:message).permit(:user_id, :room_id, :content)","    end"],"id":3}],[{"start":{"row":1,"column":2},"end":{"row":1,"column":4},"action":"remove","lines":["  "],"id":4}],[{"start":{"row":0,"column":48},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":5},{"start":{"row":1,"column":0},"end":{"row":1,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":3,"column":90},"end":{"row":3,"column":91},"action":"insert","lines":[" "],"id":6},{"start":{"row":3,"column":91},"end":{"row":3,"column":92},"action":"insert","lines":[" "]},{"start":{"row":3,"column":92},"end":{"row":3,"column":93},"action":"insert","lines":["#"]}],[{"start":{"row":3,"column":93},"end":{"row":3,"column":117},"action":"insert","lines":["user_idが current_user.id"],"id":7}],[{"start":{"row":3,"column":117},"end":{"row":3,"column":118},"action":"insert","lines":[","],"id":8}],[{"start":{"row":3,"column":117},"end":{"row":3,"column":118},"action":"remove","lines":[","],"id":9}],[{"start":{"row":3,"column":117},"end":{"row":3,"column":118},"action":"insert","lines":["、"],"id":10}],[{"start":{"row":3,"column":118},"end":{"row":3,"column":168},"action":"insert","lines":["room_idが params[:message]の room_idである Entryが存在するなら"],"id":11}],[{"start":{"row":10,"column":42},"end":{"row":10,"column":43},"action":"insert","lines":[" "],"id":12},{"start":{"row":10,"column":43},"end":{"row":10,"column":44},"action":"insert","lines":[" "]},{"start":{"row":10,"column":44},"end":{"row":10,"column":45},"action":"insert","lines":[" "]},{"start":{"row":10,"column":45},"end":{"row":10,"column":46},"action":"insert","lines":["#"]}],[{"start":{"row":10,"column":46},"end":{"row":10,"column":85},"action":"insert","lines":["@messageが保存されなかった場合、validaterにrenderする。"],"id":13}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":2},"action":"remove","lines":["  "],"id":14}]]},"timestamp":1699367110023}